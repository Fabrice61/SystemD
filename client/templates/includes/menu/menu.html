<template name="menu">
    <ul class="collapsible no-margin dark-grey general-menu " data-collapsible="accordion"
        style="{{#unless isDesktop}}height : 200vh !important;{{/unless}}" id="collapsibleMenu">
        {{!icone du site +lien vers l'acceuil}}
        <li class="title-block" style="height: 75px !important;">
            <a href="{{pathFor 'home'}}"
               class=" flex no-margin no-padding dark-grey waves-effect waves-light col s12 relative"
               style="height: 75px !important;">
                <div class="  no-padding small-margin " style="width: 70px !important ; height: 70px ">
                    <img src="/images/icon/hub_icon.png" alt="HUmanBeing" class="responsive-img  no-padding "
                         style="position: static !important; z-index:1000 !important; width: 70px ; height: 70px ">
                </div>
                <div class="flex-auto  absolute" style="bottom: 0; right: 0"><h6 class="hover-white"
                                                                                 style="font-size: 17px !important;">
                    <span class="hover-white">HU</span>man<span class="maj-title hover-white">B</span>eing</h6></div>
            </a>
        </li>
        {{!formulaire de recherche}}
        <li>
            <form action="" name="search-form" class="row no-margin valign-wrapper" searchForm>
                <a class="btn-flat col s2 no-padding small-margin " searchBtn>
                    <img src="/images/icon/search_icon.png" alt="search" class=" small-margin no-padding  "
                         style="height : 25px; widht: 25px; " >
                </a>
                <div class="input-field row no-padding small-margin s8 col valign-wrapper">

                    <input id="generalSearchInput" type="text" class="validate no-margin" name="search"
                           placeholder="Rechercher">

                </div>
            </form>
        </li>
        {{#unless currentUser}}
            {{>loginMenu}}
        {{else}}
        {{!on boucle sur les items du menu}}
            {{#each menuItem in menuItems}}
                <li class="relative">
                    {{>notificationBubble
                            itemId = menuItem.id
                            color = menuItem.color
                            notifications = menuItem.notifications
                    }}
                    {{#unless menuItem.path}}
                        <div class="collapsible-header waves-effect waves-{{menuItem.color}}  row no-padding menu-item col s12 flex relative"
                             id="{{menuItem.id}}">
                            <div class=" valign-wrapper {{menuItem.color}} darken-1 square-icon"
                                 style="padding: 7px !important;">
                                <img src="/images/icon/{{menuItem.image}}" alt="{{menuItem.name}}"
                                     class="responsive-img  " style="z-index: 100; ">
                            </div>
                            <div class="flex-auto valign-wrapper hover-{{menuItem.color}}">
                                <span class="center-align  light-grey-police font-title"
                                      style="padding-left: 10px; ">{{menuItem.name}}</span>
                            </div>

                        </div>
                        <div class="collapsible-body no-padding  row no-margin medium-dark-grey">
                            {{>subMenu menuItem
                                    color = color}}
                        </div>
                    {{else}}
                        <a href="{{pathFor menuItem.path}}"
                           class="collapsible-header waves-effect waves-{{menuItem.color}}  row no-padding menu-item col s12 flex relative"
                           id="{{menuItem.id}}">
                            <div class=" valign-wrapper {{menuItem.color}} darken-1 square-icon"
                                 style="padding: 7px !important;">
                                <img src="/images/icon/{{menuItem.image}}" alt="{{menuItem.name}}"
                                     class="responsive-img  " style="z-index: 100; ">
                            </div>
                            <div class="flex-auto valign-wrapper hover-{{menuItem.color}}">
                                <span class="center-align  light-grey-police font-title"
                                      style="padding-left: 10px; ">{{menuItem.name}}</span>
                            </div>
                        </a>
                    {{/unless}}
                </li>
            {{/each}}
        {{/unless}}
    </ul>

</template>

