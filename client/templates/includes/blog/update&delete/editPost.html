<template name="editPost">
    {{!
    Template d'edition des articles de blog, il faut lui transmettre

    isEditing = Boolean //verifie si on est en mode création ou édition
    type = project ou user  //verifie si on est avec un projet ou un utilisateur
    id = String //id du projet ou de l'utilisateur
    }}
    <link rel="stylesheet" href="/css/medium-editor.css">

    <div class="row relative" id="editPost{{#if isEditing}}-{{post_id}}{{/if}}"
    style="{{#if isEditing}}!important; padding: 3px !important; background-color: rgba(255,255,255,0.1){{/if}}">
            {{>infoBubble
                    content = "selectionner le contenu de l'article pour le mettre en page"
                position = "bottomLeft"
            }}
        <div class="col s12 no-padding">
            <div class="col s12 {{#unless or isPhone isImageWide }}m4{{else}} no-padding{{/unless}}  relative"
                 style="{{#unless isPhone}}{{#unless
                         isImageWide}}padding: 0 20px 0px 0  !important;{{/unless}}{{/unless}}">
                {{#if imageLoading}}
                    <div class="absolute" style="opacity : 0.9 ; height: 100%; width: 100%">
                        {{>loading}}
                    </div>
                {{/if}}
                <img class="img-max-width" src="{{postImage}}">
                <div class="fixed-action-btn horizontal fab-menu-btn"
                     style="top:-15px; right:10px !important; ">
                    <a class="btn-floating valign-wrapper btn-large dark-grey waves-effect
                shadow waves-light tooltipped hover-bg-orange"
                       data-position="bottom"
                       data-delay="50" data-tooltip="Modifier l'image"
                    >
                        <span><i class="material-icons light-grey-police">photo_size_select_actual
</i></span>
                    </a>
                    <ul class="right-align">
                        <li class="inline-block small-margin">
                            <a class="btn-floating orange tooltipped shadow waves-effect waves-light"
                               data-position="bottom"
                               data-delay="50" data-tooltip="image réduite" smallImage>

                                <i class="material-icons  grey-text text-darken-4">featured_video</i>

                            </a>
                            <input type="file" id="small-image-input" class="hidden absolute" smallImageInput>
                        </li>
                        {{#unless isPhone}}
                        <li class="inline-block small-margin">
                            <a class="btn-floating orange tooltipped  shadow waves-effect waves-light" largeImage
                               data-position="bottom"
                               data-delay="50" data-tooltip="image large">
                                <i class="material-icons  grey-text text-darken-4">crop_5_4</i>
                            </a>
                            <input type="file" id="large-image-input" class="hidden absolute" largeImageInput>
                        </li>
                        {{/unless}}
                    </ul>
                </div>
            </div>
            {{#if or isImageWide isPhone }}
                <div class="row absolute" style="width: 100%">
                    <div class="col s12"
                         style="opacity: 0.7; background-color: #0e0e0e;padding: 22px 15px 0 15px !important;">
                        <h5 class="white-text editable-title " contenteditable="true" style="margin:0 !important; "
                            id="post-title">
                            {{postTitle}}
                        </h5>

                        <div class="right-align">
                            <i class="small-info small-margin white-text">
                                le {{localeDate date}}
                            </i>
                        </div>
                    </div>
                </div>

            {{else}}
                <div class="col s12 m8">
                    <h5 class="small-margin editable-title" contenteditable="true" id="post-title">
                        {{postTitle}}
                    </h5>
                    <div class="right-align">
                        <i class="small-info small-margin white-text">
                            le {{localeDate date}}
                        </i>
                    </div>
                </div>
                <div class="text edit-post editable editable-post-content puce-list formattedText"
                     style="text-align: justify ; min-height: 200px !important;
                     margin-top : 70px!important;"
                     id="post-content">
                    {{postContent}}
                </div>
            {{/if}}

        </div>
        {{#if or isImageWide isPhone}}
            <div class="row no-margin">
                <div class="col s12 no-padding">
                    <div class="text edit-post editable editable-post-content puce-list formattedText"
                         style="text-align: justify ; min-height: 40px !important; "
                         id="post-content">
                        {{postContent}}
                    </div>
                </div>
            </div>

        {{/if}}
        {{#unless isEditing}}
        <a class="btn-floating valign-wrapper btn-large dark-grey waves-effect
        shadow waves-light tooltipped  hover-bg-{{#if isProject }}orange{{else}}green{{/if}} hover-dark-grey absolute"
           style="bottom: -70px !important; right:-35px !important;"
           data-position="bottom"
           data-delay="50" data-tooltip="Publier l'article"
           Publish
        >
            <span><i class="material-icons {{#if isProject }}orange-text{{else}}green-text{{/if}}">send</i></span>
        </a>
            {{else}}
            <div class=" center-align" style="padding: 20px !important;">
                <a class="btn-floating valign-wrapper btn-large dark-grey waves-effect static
        shadow waves-light tooltipped {{#if noChange}}disabled{{/if}} hover-bg-{{#if isProject }}orange{{else}}green{{/if}} hover-dark-grey"
                   style=""
                   data-position="bottom"
                   data-delay="50" data-tooltip="Enregistrer les modifications"
                   EditPost
                >
                    <span><i class="material-icons {{#if noChange}}grey-text text-darken-2{{else}}{{#if isProject }}orange-text{{else}}green-text{{/if}}{{/if}}">done</i></span>
                </a>
            </div>
        {{/unless}}
    </div>

</template>