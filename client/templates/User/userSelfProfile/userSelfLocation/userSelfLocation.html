<template name="userSelfLocation">
    <div class="row no-margin">
        <div class="row">
            <div class="col s10">
                <h6>localisation</h6>
                {{#if and city country}}
                    <p>{{city}}, <b>{{country}}</b></p>
                {{else}}
                    <p class="orange-text">vous n'avez pas encore renseign√© votre position</p>
                {{/if}}
            </div>
            <div class="col s1">
                {{#if editingLocation}}
                    <button class="btn-floating dark-grey  waves-effect waves-light" editLocation>
                        <i class="material-icons">close</i>
                    </button>
                {{else}}
                    <button class="btn-floating dark-grey  waves-effect waves-light tooltipped" data-position="bottom"
                            data-delay="50" data-tooltip="modifier la localisation" editLocation>
                        <i class="material-icons">mode_edit</i>
                    </button>
                {{/if}}
            </div>
        </div>
        {{#if editingLocation}}
            <div class="dark-grey small-padding row">
                <div class="col s6 center-align">
                    <div class=" tooltipped waves-effect waves-light " data-position="bottom" data-delay="50"
                         data-tooltip="rechercher une position" useSearchForm>
                        <span class="material-icons ">search</span>
                    </div>
                </div>
                <div class="col s6 center-align">
                    <div class=" tooltipped waves-effect waves-light " data-position="bottom" data-delay="50"
                         data-tooltip="Utiliser ma position actuelle" useUserPosition>
                        <span class="material-icons ">person_pin</span>
                    </div>
                </div>

                {{#if useSearchForm}}
                    <div class="row no-margin">
                        <form class="col s12">
                            <div class="input-field ">
                                <i class="material-icons prefix tooltipped waves-effect waves-light tiny"
                                   data-position="bottom"
                                   data-delay="50"
                                   data-tooltip="saisir un nom de ville, un code postal, un pays">map</i>
                                <input id="icon_prefix " type="text" class="location-search-field">
                                <label for="icon_prefix">Entrez votre ville</label>
                            </div>
                        </form>
                        {{#if searchResults}}
                            {{#each searchResult in searchResults}}
                                {{#if and searchResult.address.city searchResult.address.country}}
                                    <div class="row no-margin">
                                        <span class="col s10">
                                            {{searchResult.address.city}}, <b>{{searchResult.address.country}}</b>
                                        </span>
                                        <span class="col s2">
                                            <span class="material-icons waves-effect waves-light tooltipped"
                                                  id="addresschoice-{{@index}}" data-position="bottom"
                                                  data-delay="50"
                                                  data-tooltip="Selectionner cette ville" chooseAddress>
                                                pin_drop
                                            </span>
                                        </span>
                                    </div>
                                {{/if}}
                            {{/each}}
                        {{/if}}
                    </div>
                {{/if}}
            </div>
        {{/if}}
    </div>
</template>