<template name="editCompetences">
    <div class="row no-margin" id="editCompetences">
        {{#if isEditing}}
            {{#if isEdited}}
                <a href="#" class="btn-floating top-right-btn dark-grey  waves-effect waves-light " saveCompetencesBtn>
                    <i class="material-icons orange-text tooltipped"
                       data-position="bottom" data-delay="50"
                       data-tooltip="enregister">save</i>
                </a>
            {{else}}
                <a class="btn-floating dark-grey top-right-btn waves-effect waves-light" editCompetencesBtn>
                    <i class="material-icons">close</i>
                </a>
            {{/if}}
        {{else}}
            <a href="#" class="btn-floating top-right-btn dark-grey  waves-effect waves-light " editCompetencesBtn>
                <i class="material-icons tooltipped "
                   data-position="bottom" data-delay="50"
                   data-tooltip="éditer">mode_edit</i>
            </a>
        {{/if}}
        {{#unless isEditing}}
            {{#if sortedCompetences.length}}
                {{#each category in sortedCompetences}}
                    <div class="row no-margin">
                        <p class=" small-info small-margin">{{category.categoryName}}</p>
                        {{#each competence in category.competences}}
                            <div class="chip tooltipped green-text"
                                 data-position="bottom" data-delay="350"
                                 data-tooltip="{{competence.subCategoryName}}">
                                {{competence.competenceName}}
                            </div>
                        {{/each}}
                    </div>

                {{/each}}
            {{else}}
                <i class="small-info">Compétences non renseignées</i>
            {{/if}}
        {{else}}
            <div class="chips green-text">
            </div>

        {{/unless}}

    </div>
    {{#if isEditing}}
        {{#if showAddNewCompetence}}
            <div id="addCompetencesModal" class="modal modal-fixed-footer dark-grey ">
                <div class="modal-content dark-grey scrollbar">
                    <div class="row">

                        <div class="col s12 xl6 offset-xl3 relative ">
                            <p class="center-align" style="margin:0 10px 20px 10px!important;">
                                <i class="justify small-info orange-text">La compétence que vous souhaitez indiquer
                                    n'existe pas encore,
                                    il est nécessaire de l'inclure dans une catégorie pour qu'elle soit enregistrée </i>
                            </p>
                            {{>infoBubble
                                    position="bottomRight"
                                    content= "l'enregistrement des compétences permet un meilleur référencement de celles ci, et rends la mise en lien des utilisateurs et des projets plus efficace"}}
                        </div>
                        <h5 class="center-align orange-text">{{newCompetence}}</h5>
                    </div>
                    <div class="row">
                        <div class="col s12 m6 input-field  {{#unless shownSubCategories.length}}offset-m3{{/unless}}">
                            <select chooseCategory id="chosenCategory">
                                <option value="" disabled selected>Choisissez une catégorie</option>
                                {{#each cat in competenceCategories}}
                                    <option value="{{cat.index}}">{{cat.frenchName}}</option>
                                {{/each}}
                            </select>
                            <label>Catégorie</label>
                        </div>
                        {{#if shownSubCategories.length}}
                            <div class="col s12 m6 input-field">
                                <select chooseSubCategory id="chosenSubCategory">
                                    <option value="" disabled selected>Choisissez une sous-catégorie</option>
                                    {{#each cat in shownSubCategories}}
                                        <option value="{{cat.index}}">{{cat.frenchName}}</option>
                                    {{/each}}
                                </select>
                                <label>Sous-catégorie</label>
                            </div>
                        {{/if}}
                    </div>
                    <div class="row">
                        <div class="col s12 m6 offset-m3">
                            <a class="btn btn-block waves-effect orange-text waves-light dark-grey hover-dark-grey hover-bg-orange {{#unless readyToAddCompetence}}disabled{{/unless}}" addNewCompetence>
                                <span >Ajouter{{#unless isPhone}} la compétence{{/unless}}</span>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="modal-footer dark-grey">
                    <a class="modal-action modal-close waves-effect waves-green btn-flat " >
                        <i class="material-icons">clear</i>
                    </a>
                </div>
            </div>
        {{/if}}
        {{>infoBubble
                position="bottomLeft"
                content ="Ajouter vos compétences, utiliser les compétences déjà réferencées permet de meilleurs résultats dans la mise en lien avec les projets"}}
    {{/if}}
</template>